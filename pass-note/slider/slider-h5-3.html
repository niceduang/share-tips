<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>Title</title>
    <style>
        *{margin: 0;padding: 0;}
        li{list-style: none;}
        /*轮播图开始*/
        .slide {
            position: relative;
            overflow: hidden;
            width: 6.0rem;
            height: 5rem;
            margin: 0 auto;
        }
        .imgUl {
            width: 30.0rem;
            font-size: 0;
            white-space: nowrap;
        }
        .imgUl li {
            display: inline-block;
            font-size: 40px;
            width: 6rem;
            height: 5.0rem;
            background-color: #f90;
        }
        .slide-list {
            position: absolute;
            right: 0.4rem;
            bottom: 0.4rem;
        }
        .slide-list li {
            float: left;
            width: 0.4rem;
            height: 0.4rem;
            border-radius: 50%;
            background: white;
            margin-right: 0.2rem;
        }
        .slide-list li.active {
            background: orangered;
        }/*轮播图结束*/
    </style>
</head>
<body>
<!--轮播图开始-->
<div class="slide">
    <ul class="imgUl">
        <li>3</li>

        <li>1</li>
        <li>2</li>
        <li>3</li>

        <li>1</li>
    </ul>
    <ul class="slide-list">
        <li class="active"></li>
        <li></li>
        <li></li>
    </ul>
</div>
<!--轮播图结束-->
</body>
<script>
    (function(){
        var html = document.documentElement;
        var hWidth = html.getBoundingClientRect().width;
        html.style.fontSize = hWidth/15 + "px";
    })();
    slider();

    function slider() {
        var imgUl = document.querySelector('.imgUl');
        var imgBox = imgUl.parentNode;
        var li_width = imgUl.children[0].offsetWidth;
        var dots = document.querySelector('.slide-list').children;
        var current = 1;
        var isMove = false;
        setTransform(imgUl,-current*li_width,'x');
        addTransitionEnd(imgUl,function () {
            if(current >= imgUl.children.length -1){
                current = 1;
            }else if(current == 0){
                current = imgUl.children.length - 2;
            }
            removeTransition(imgUl);
            setTransform(imgUl,-current*li_width,'x');
            updateDot();
            isMove = false;
        });

        imgBox.addEventListener('touchstart',function (e) {
            if (isMove) {return;}
            imgUl.startX = e.touches[0].pageX;
        })
        imgBox.addEventListener('touchmove',function (e) {
            isMove = true;
            imgUl.endX = e.touches[0].pageX;
            imgUl.distance = imgUl.endX - imgUl.startX;
            removeTransition(imgUl);
            setTransform(imgUl,-current*li_width+imgUl.distance,'x')
        })
        imgBox.addEventListener('touchend',function () {
            if(isMove){
                if(Math.abs(imgUl.distance)>li_width/3){
                    if(imgUl.distance>0 && current>=1){
                        current--;
                    }else if(imgUl.distance<0 && current<=imgUl.children.length -2){
                        current++;
                    }
                    addTransition(imgUl);
                    setTransform(imgUl,-current*li_width,'x')
                }else{
                    addTransition(imgUl);
                    setTransform(imgUl, -current*li_width, 'x');
                }
            }
        });

        function updateDot() {
            for(var i = 0;i<dots.length;i++){
                dots[i].classList.remove('active');
            }
            dots[current - 1].classList.add('active');
        }
    }

    function addTransition(obj,time) {
        var dur = 0.5;
        if(time){
            dur = time;
        }
        obj.style.transition = 'all ' + dur +'s';
        obj.style.webkitTransition = 'all ' + dur +'s';
    }

    function removeTransition(obj) {
        obj.style.transition = ''
        obj.style.webkitTransition = '';
    }

    function setTransform(obj,dis,dir) {
        obj.style.transform = 'translate'+dir+'('+dis+'px)';
        obj.style.webkitTransform = 'translate'+dir+'('+dis+'px)';
    }

    function addTransitionEnd(obj,fn) {
        obj.addEventListener('transitionEnd', fn);
        obj.addEventListener('webkitTransitionEnd', fn);
    }
</script>
</html>