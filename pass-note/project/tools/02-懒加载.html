<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>预加载</title>
<style>
    *{margin: 0;padding: 0;}
    li{list-style: none;}
    ul {
        display: flex;
        flex-flow: row wrap;
        justify-content: space-between;
        width: 1000px;
        margin: 0 auto;
        height: auto;
        border: 1px solid red;
    }
    li {
        width: 300px;
        height: 400px;
        border: 1px solid blue;
        margin: 5px;
    }
</style>
</head>
<body>
<ul id="ul">
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
</ul>
<script type="text/javascript">
window.onload = function(){
    var Ul = document.getElementById('ul');
    console.log(parseInt(getStyle(Ul, 'height')));
    console.log(document.documentElement.clientHeight);
    console.log(document.body.scrollTop);
    var onoff = false;
    window.onscroll = function () {
        var ulHeight = parseInt(getStyle(Ul, 'height')),
            clientHeight = document.documentElement.clientHeight || document.body.clientHeight,
            scrollTop = document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop;
        if (ulHeight - clientHeight - scrollTop < 100) { // 计算剩余未漏出来的ul高度
            onoff = true;
            var creatLi = '';
            for (var i=0; i<10; i++) {
                creatLi += "<li></li>";
            }
            Ul.innerHTML += creatLi;
            onoff != onoff;
        }
    };
    // 获取style
    function getStyle(obj, attr) {
        if (obj.currentStyle) {
            return obj.currentStyle[attr];
        } else {
            return getComputedStyle(obj, false)[attr];
        }
    }
}
</script>
</body>
</html>