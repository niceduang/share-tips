<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>折线图</title>
	<style type="text/css">
		*{margin: 0;padding: 0;}
		.box{width: 700px;height: 400px;margin: 0 auto;}
	</style>
</head>
<body>
	<div class="box">
		<canvas id="canvas">您的浏览器不支持canvas请升级浏览器</canvas>
	</div>
	<script type="text/javascript">
		window.onload = function(){
			var canvas = document.getElementById('canvas');
			var ctx = canvas.getContext('2d');
			// console.log(ctx);
			canvas.width = 700;
			canvas.height = 400;
			canvas.style.border = '1px solid #666';
			var dis = 30;
			var l = 20;
			// 绘制坐标轴
			drawXY(dis,l);
			/**
			 * [drawXY description]
			 * @param  {[num]} dis [边距]
			 * @param  {[num]} l [尖角斜边长度]
			 */
			function drawXY(dis,l){
				ctx.beginPath();
				ctx.strokeStyle = "#ccc";
				// 绘制x轴
				ctx.moveTo(dis, canvas.height-dis);
				ctx.lineTo(canvas.width-dis, canvas.height-dis);
				ctx.stroke();
				// 绘制箭头,假定30度角，斜边30px长度
				// console.log(Math.sin(30*Math.PI/180)*30);//15
				// console.log(Math.cos(30*Math.PI/180)*30);//26
				var x = Math.cos(30*Math.PI/180)*l;
				var y = Math.sin(30*Math.PI/180)*l;
				ctx.moveTo(canvas.width-dis-x, canvas.height-dis-y);
				ctx.lineTo(canvas.width-dis, canvas.height-dis);
				ctx.lineTo(canvas.width-dis-x, canvas.height-dis+y);
				ctx.stroke();
				// 绘制Y轴
				ctx.moveTo(dis, canvas.height-dis);
				ctx.lineTo(dis, dis);
				ctx.stroke();
				// 绘制箭头
				ctx.moveTo(dis-y, dis+x);
				ctx.lineTo(dis, dis);
				ctx.lineTo(dis+y, dis+x);
				ctx.stroke();
			}
			// 数据
			var data = [[0,50],[100,50],[200,100],[300,290],[400,270],[500,330],[600,140]];
			drawLine(data);
			function drawLine(data){
				ctx.beginPath();
				ctx.strokeStyle = "#f00";
				ctx.moveTo(dis + data[0][0], canvas.height - dis - data[0][1]);
				for (var i = 0; i < data.length; i++) {
					ctx.lineTo(dis + data[i][0], canvas.height - dis - data[i][1]);
					console.log(dis + data[i][0]);
				}
				ctx.stroke();
			}
		}
	</script>
</body>
</html>