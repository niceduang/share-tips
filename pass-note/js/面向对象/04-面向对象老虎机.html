<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
<script type="text/javascript">
var TigerLottery = function(options){
        //默认设置
        var defaults = {
            domId: '',
            columnItem: 'li',
            //startBtn: '.start-btn',
            speed:2,
            auto:0,
            height:208,//奖品高度
            column:3,//列数
            incr:3,//单位时间滚动距离
            type:1,
            loop:3,//循环次数
            columnItemSize:[4,4,4] //每一列的个数
        };
        $.extend(this, defaults, options || {});
        this.incr = mmc(this.columnItemSize);
    };
    TigerLottery.prototype = {
        complete:function(t){
            var me = this;
            var _overCallback = me.completeCallback || function () {};
            _overCallback(t);
        },
        resetColumnData:function(){
        	var me = this;
            me.defaultItem = {};
            $(me.domId+" "+me.columnItem).each(function(i){
            	$(this).css({"height":me.height*me.incr+"px"});
            	me.defaultItem[i]={
            		n : 0,
            		k : me.height*me.incr*me.loop+(i==me.column-1?(parseInt($(this).attr("data-item"))*me.height*2) : 0),
            		flag : false
            	};
            });
        },
        rollTo:function(t){
        	var me = this;
        	me.timer || (me.timer = setInterval(function(){
	        	$(me.domId+" "+me.columnItem).each(function(i) {
	                if (me.defaultItem[i].n <= parseInt(-me.defaultItem[i].k-t[i]*me.height)){
	                	if(i==me.column-1){
                            me.defaultItem[i].flag = true;
	                		clearInterval(me.timer);
	                		me.complete(t);
	                	}else{
	                		me.defaultItem[i].flag = true;
	                	}
	                }else{
	                	me.defaultItem[i].n -= me.incr;
	                }
			        me.defaultItem[i].flag ? $(this).css({'background-position':'0 ' + parseInt(-me.defaultItem[i].k-t[i]*me.height) + 'px'}) : $(this).css({'background-position':'0 ' + me.defaultItem[i].n + 'px'});
	            });
            },me.speed));

            //if(CookieAux.getCookie('lotteryTigerResult') == "") {
                var tArray=[];
                $(me.domId+" "+me.columnItem).each(function(i) {
                    tArray.push(t[i]);
                });
                console.log(tArray.join('|'));
                var expdate = new Date();
                expdate.setDate(expdate.getDate() + 7);
                expdate.setHours(0, 0, 0, 0);
                CookieAux.setCookie('lotteryTigerResult', tArray.join('|'), expdate);
            //}
        }
    };
</script>
</body>
</html>