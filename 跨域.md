# 借助node前端代理转发接口
```js
// server.js
var path = require('path')
var express = require('express')
// 代理
var proxy = require('http-proxy-middleware')
// 跨域
// var cors = require('cors')

var app = express()
// app.use(cors())

app.use(express.static(path.join(__dirname, 'www')))

// // 设置代理

// // http://localhost:3000/v2/music/search?q=张杰 -> https://api.douban.com/v2/music/search?q=张杰
// app.use('/v2', proxy({
//   target: 'https://api.douban.com',
//   changeOrigin: true
// }))

// // http://localhost:3000/getPlayerGloryRank?appid=10005&seasonid=KPL2018S1 -> https://api.tgatv.qq.com/app/match/getPlayerGloryRank?appid=10005&seasonid=KPL2018S1
// app.use('/getPlayerGloryRank', proxy({
//   target: 'https://api.tgatv.qq.com/app/match',
//   changeOrigin: true
// }))

// app.use('/api', proxy({
//   target: 'https://www.tuling123.com/openapi/',
//   changeOrigin: true
// }))

// 设置代理

app.middleware = [
  proxy(['/v2'], {target: 'https://api.douban.com', changeOrigin: true}),
  proxy(['/getPlayerGloryRank'], {target: 'https://api.tgatv.qq.com/app/match', changeOrigin: true}),
  proxy(['/api'], {target: 'https://www.tuling123.com/openapi/', changeOrigin: true})
]

app.use(app.middleware)

app.listen(3000, () => {
  console.log('http://localhost:3000')
})

```
```js
// GET
$.ajax({
  url: 'v2/music/search',
  type: 'GET',
  dataType: 'json',
  data: {
    q: '张杰'
  }
})
.done((res) => {
  console.log({ res })
})
.fail((err) => {
  console.log(err)
})

// POST
$.ajax({
  url: 'api',
  type: 'POST',
  dataType: 'json',
  data: {
    key: 'c9d1eb9811e648a49ece24b7cb1065e9',
    info: '武汉',
    userId: 1
  }
})
.done((res) => {
  console.log({ res })
})
.fail((err) => {
  console.log(err)
})
```